{"version":3,"sources":["../../../../src/lib/parsers/parse-shx.ts"],"names":["parseSHPHeader","SHX_HEADER_SIZE","BIG_ENDIAN","parseShx","arrayBuffer","headerView","DataView","header","contentLength","length","contentView","offsets","Int32Array","lengths","i","getInt32"],"mappings":"AAAA,SAAQA,cAAR,QAA6B,oBAA7B;AAOA,MAAMC,eAAe,GAAG,GAAxB;AACA,MAAMC,UAAU,GAAG,KAAnB;AAMA,OAAO,SAASC,QAAT,CAAkBC,WAAlB,EAAuD;AAE5D,QAAMC,UAAU,GAAG,IAAIC,QAAJ,CAAaF,WAAb,EAA0B,CAA1B,EAA6BH,eAA7B,CAAnB;AACA,QAAMM,MAAM,GAAGP,cAAc,CAACK,UAAD,CAA7B;AACA,QAAMG,aAAa,GAAGD,MAAM,CAACE,MAAP,GAAgBR,eAAtC;AAEA,QAAMS,WAAW,GAAG,IAAIJ,QAAJ,CAAaF,WAAb,EAA0BH,eAA1B,EAA2CO,aAA3C,CAApB;AAEA,QAAMG,OAAO,GAAG,IAAIC,UAAJ,CAAeJ,aAAf,CAAhB;AACA,QAAMK,OAAO,GAAG,IAAID,UAAJ,CAAeJ,aAAf,CAAhB;;AAEA,OAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,aAAa,GAAG,CAApC,EAAuCM,CAAC,EAAxC,EAA4C;AAC1CH,IAAAA,OAAO,CAACG,CAAD,CAAP,GAAaJ,WAAW,CAACK,QAAZ,CAAqBD,CAAC,GAAG,CAAzB,EAA4BZ,UAA5B,CAAb;AACAW,IAAAA,OAAO,CAACC,CAAD,CAAP,GAAaJ,WAAW,CAACK,QAAZ,CAAqBD,CAAC,GAAG,CAAJ,GAAQ,CAA7B,EAAgCZ,UAAhC,CAAb;AACD;;AAED,SAAO;AACLS,IAAAA,OADK;AAELE,IAAAA;AAFK,GAAP;AAID","sourcesContent":["import {parseSHPHeader} from './parse-shp-header';\n\nexport interface SHXOutput {\n  offsets: Int32Array;\n  lengths: Int32Array;\n}\n\nconst SHX_HEADER_SIZE = 100;\nconst BIG_ENDIAN = false;\n\n/**\n * @param arrayBuffer\n * @returns SHXOutput\n */\nexport function parseShx(arrayBuffer: ArrayBuffer): SHXOutput {\n  // SHX header is identical to SHP Header\n  const headerView = new DataView(arrayBuffer, 0, SHX_HEADER_SIZE);\n  const header = parseSHPHeader(headerView);\n  const contentLength = header.length - SHX_HEADER_SIZE;\n\n  const contentView = new DataView(arrayBuffer, SHX_HEADER_SIZE, contentLength);\n\n  const offsets = new Int32Array(contentLength);\n  const lengths = new Int32Array(contentLength);\n\n  for (let i = 0; i < contentLength / 8; i++) {\n    offsets[i] = contentView.getInt32(i * 8, BIG_ENDIAN);\n    lengths[i] = contentView.getInt32(i * 8 + 4, BIG_ENDIAN);\n  }\n\n  return {\n    offsets,\n    lengths\n  };\n}\n"],"file":"parse-shx.js"}